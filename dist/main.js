(()=>{"use strict";const e=async()=>{const e=await(async()=>{try{const e=await fetch("http://gateway.marvel.com/v1/public/characters?limit=100&offset=200&ts=1&apikey=9d1213bcbc5b3fd8b46eb731651494fa&hash=0625ad92b2f50b8ee1ca09827ba36f69");let t=await e.json(),n=[];n=Object.values(t.data.results);let o=[];for(let e=0;e<n.length;e++)"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available"!==n[e].thumbnail.path&&"gif"!==n[e].thumbnail.extension&&o.push(n[e]);return t=o,t}catch(e){console.log("Fetch error",e)}})(),t=document.getElementById("card-collection");let n=[];for(let t=0;t<8;t++){let t=Math.floor(Math.random()*(e.length-1-1+1)+1);0==n.includes(t)?n.push(t):n.push(Math.ceil(t/2))}let o=(e=>{let t,n,o=e.length;for(;0!==o;)n=Math.floor(Math.random()*o),o-=1,t=e[o],e[o]=e[n],e[n]=t;return e})(Array.from(n).concat(n));console.log(o);for(let n=0;n<o.length;n++)t.innerHTML+=` \n            <div class="card-holder">\n                <div class="card">\n                    <div class="card-front">\n                        \n                    </div>\n                    <div class="card-back">\n                        <img class=card-image src="${e[o[n]].thumbnail.path}.${e[o[n]].thumbnail.extension}">\n                    </div>\n                </div>\n            </div>`},t=(e,t)=>{e[t].classList.add("spin")},n=()=>{let e=document.querySelector("main"),t=document.querySelector(".countNumber"),n=document.getElementById("minutes"),o=document.getElementById("seconds");e.innerHTML+=`<div class="modal">  \n    <div class="modal-container">\n        <header class="modal-header">\n            <h1>CONGRATS, YOU'RE A HERO!</h1>\n            <label for="modal-closeButton"><h1>X</h1></label>\n        </header>\n        <h2>YOUR RESULTS:</h2>\n        <div class="results">\n            <h3>MOVEMENTS: ${t.innerHTML}</h3>\n            <h3>TIME: ${n.innerHTML}m ${o.innerHTML}s</h3>\n            <div class="play-again-button">\n                <a href="">PLAY AGAIN</a>\n            </div>\n        </div>\n        \n        </div>\n    </div>`};function o(e){this.timerState=e.timerState,this.media=e.audio,this.plugins=e.plugins||[],this._initPlugins()}o.prototype._initPlugins=function(){this.plugins.forEach((e=>{e.run(this)}))},o.prototype.fetch=async function(){await e()},o.prototype.flipCard=function(){(()=>{let e=[],o=[],i=[];setTimeout((()=>{e=document.querySelectorAll(".card"),o=document.querySelectorAll(".card-front");for(let l=0;l<o.length;l++)o[l].addEventListener("click",(()=>{if(i.push(l),console.log(i),t(e,l),e[i[i.length-1]].children[1].children[0].attributes[1].nodeValue!==e[i[i.length-2]].children[1].children[0].attributes[1].nodeValue){for(let t=0;t<e.length;t++)e[t].classList.remove("spin");t(e,l)}else{console.log("son iguales"),t(e,l);let c=[];c.push(e[i[i.length-1]],e[i[i.length-2]]);for(let e=0;e<c.length;e++)c[e].setAttribute("class","static"),[...document.querySelectorAll(".static")].length==o.length&&(console.log("Pop Up"),n())}}))}),2e3)})()},o.prototype.play=function(){this.media.play()},o.prototype.mute=function(){this.media.muted=!0},o.prototype.muteUnmute=function(){this.media.muted?this.media.muted=!1:this.media.muted=!0},o.prototype.toggleTimerStart=function(){0==this.timerState?(this.timerState=1,1==this.timerState&&(()=>{let e=document.getElementById("minutes"),t=document.getElementById("seconds"),n=0,o=0;window.setInterval((()=>{60==o&&(o=0,n++,e.innerHTML="0"+n,0==n&&(n=0)),t.innerHTML=o<10?"0"+o:o,o++}),1e3)})(),console.log("connected")):(console.log("not connected"),this.timerState=1)};const i=o;function l(){}let c=document.getElementById("movements-counter"),a=document.querySelector(".Zero");l.prototype.run=function(){setTimeout((()=>{let e=document.querySelectorAll(".card-holder");e=[...e];let t=[];e.forEach((e=>{e.addEventListener("click",(()=>{if(t.push("click"),t.length%2==0){for(let e=3;e<c.childNodes.length;e++)a.remove(),c.childNodes[e].remove();let e=document.createElement("h2");e.className="countNumber",c.appendChild(e),e.textContent=t.length/2}}))}))}),2e3)};const s=l;function r(){}r.prototype.run=function(e){const t=document.getElementById("muteUnmuteContainer"),n=document.createElement("img");n.src="https://img.icons8.com/windows/25/ffffff/high-volume--v3.png",document.querySelector(".card-collection").addEventListener("click",(()=>{e.play(),t.appendChild(n)})),n.addEventListener("click",(()=>{e.muteUnmute(),"https://img.icons8.com/windows/25/ffffff/high-volume--v3.png"==n.src?n.src="https://img.icons8.com/windows/25/ffffff/no-audio--v3.png":(n.src="https://img.icons8.com/windows/25/ffffff/no-audio--v3.png")&&(n.src="https://img.icons8.com/windows/25/ffffff/high-volume--v3.png")}))};const d=r,u=document.querySelector("audio"),m=document.getElementById("card-collection"),h=document.querySelector(".play-again-button");let f=new i({timerState:0,audio:u,plugins:[new s,new d]});f.fetch(),f.flipCard(),m.onclick=()=>f.toggleTimerStart(),h.onclick=()=>location.reload()})();